<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>如何利用ChatGPT构建一个股票筛选助手</title>
      <link href="/2023/06/11/chatgpt-plugins-stock-screener-assistant/"/>
      <url>/2023/06/11/chatgpt-plugins-stock-screener-assistant/</url>
      
        <content type="html"><![CDATA[<h1>如何利用ChatGPT构建一个股票筛选助手插件？</h1><p>本篇文章为翻译版本，原文链接可点击<a href="https://www.mlq.ai/chatgpt-plugins-stock-screener-assistant/">这里</a>。</p><p>在我们之前的ChatGPT插件教程中，我们已经介绍了如何设置一个简单的待办事项列表并构建一个AI新闻助手。在这篇指南中，我们将构建一个新的ChatGPT插件，它可以作为一个股票筛选助手，也就是说，它可以根据用户的查询来检索和筛选股票。为了做到这一点，我们将使用Financial Modeling Prep API，特别是股票筛选器端点，并将在Replit上托管代码。为了做到这一点，我们需要构建这个插件的三个主要文件包括：</p><ul><li>一个main.py文件，用于提供API的功能</li><li>一个插件清单ai-plugin.json文件，用于提供元数据</li><li>一个openapi.yaml文件，用于为ChatGPT文档化API</li></ul><p>例如，有了这个插件，我可以询问这样的问题:</p><p><em>展示给我市值超过10亿美元，每股股息超过2美元的科技公司</em></p><p><img src="https://yiboway-blog-1301945320.cos.ap-hongkong.myqcloud.com/img/blog_article/Screenshot-2023-04-26-at-5.12.04-PM.png" alt></p><p>如你所见，股票筛选器允许用户指定他们的标准，如：</p><ul><li>市值</li><li>部门和行业</li><li>股息</li><li>Beta值，等等</li></ul><p>好的，现在我们知道我们要构建什么，让我们开始构建API功能。</p><h1>第一步：构建API功能</h1><p>第一步，我们将创建一个新的Python Repl，并创建一个main.py文件来提供我们API的功能和我们需要的其他文件。</p><h2 id="Imports-and-constants">Imports and constants</h2><p>首先，我们将导入必要的包，初始化我们的Flask应用，并定义两个Financial Modeling Prep API的常量：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">from</span> logging <span class="keyword">import</span> StreamHandler</span><br><span class="line"><span class="keyword">from</span> waitress <span class="keyword">import</span> serve</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request, jsonify, send_from_directory</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line">FMP_API_KEY = <span class="string">&quot;your-api-key&quot;</span></span><br><span class="line">FMP_API_URL = <span class="string">&quot;https://financialmodelingprep.com/api/v3&quot;</span></span><br></pre></td></tr></table></figure><h2 id="获取股票筛选数据">获取股票筛选数据</h2><p>接下来，我们将定义一个股票筛选器函数，该函数接收用户定义的查询参数，并向Financial Modeling Prep发送请求：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">stock_screener</span>(<span class="params">**params</span>):</span><br><span class="line">  url = <span class="string">f&quot;<span class="subst">&#123;FMP_API_URL&#125;</span>/stock-screener&quot;</span></span><br><span class="line">  params[<span class="string">&quot;apikey&quot;</span>] = FMP_API_KEY</span><br><span class="line">  response = requests.get(url, params=params)</span><br><span class="line">  <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">    <span class="keyword">return</span> response.json()</span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">raise</span> Exception(<span class="string">f&quot;Error: <span class="subst">&#123;response.status_code&#125;</span>, <span class="subst">&#123;response.text&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="获取股票筛选器数据的API路由">获取股票筛选器数据的API路由</h2><p>接下来，我们将创建一个API路由，用于处理传入的用户定义的查询参数，调用我们刚刚创建的股票筛选器函数，并以JSON格式返回结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/stock_screener&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fetch_stock_screener</span>():</span><br><span class="line">  app.logger.info(<span class="string">&quot;Fetching Stock Screener&quot;</span>)</span><br><span class="line">  query_params = request.args.to_dict()</span><br><span class="line">  screener_data = stock_screener(**query_params)</span><br><span class="line">  <span class="keyword">return</span> jsonify(screener_data)</span><br></pre></td></tr></table></figure><h2 id="提供插件文件">提供插件文件</h2><p>现在我们已经有了我们的Financial Modeling Prep API函数，我们需要三个更多的路由来提供必要的ChatGPT插件文件，包括ai-plugin.json、openapi.yaml和插件logo：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/.well-known/ai-plugin.json&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_ai_plugin_json</span>():</span><br><span class="line">  <span class="keyword">return</span> send_from_directory(<span class="string">&#x27;.well-known&#x27;</span>, <span class="string">&#x27;ai-plugin.json&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="提供openapi-yaml">提供openapi.yaml</h2><p>接下来，我们需要一个路由来提供openapi.yaml文件，这个文件被ChatGPT用来理解插件可以做什么以及如何与API端点交互：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/openapi.yaml&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_openapi_yaml</span>():</span><br><span class="line">  <span class="keyword">return</span> send_from_directory(<span class="string">&#x27;.&#x27;</span>, <span class="string">&#x27;openapi.yaml&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="提供插件logo">提供插件logo</h2><p>最后，我们将创建一个路由来提供插件logo：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/logo.png&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_logo</span>():</span><br><span class="line">  <span class="keyword">return</span> send_from_directory(<span class="string">&#x27;.&#x27;</span>, <span class="string">&#x27;logo.png&#x27;</span>)</span><br></pre></td></tr></table></figure><p>有了这些API函数和路由，我们的Flask应用现在已经设置好来处理来自ChatGPT的传入请求并提供必要的文件。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">  app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>, port=<span class="built_in">int</span>(os.environ.get(<span class="string">&#x27;PORT&#x27;</span>, <span class="number">8080</span>)))</span><br></pre></td></tr></table></figure><h1>第二步：创建插件清单</h1><p>接下来，让我们创建插件清单文件，该文件：</p><ul><li>包括关于你的插件的元数据（名称、logo等）</li><li>关于需要的认证的详细信息（认证类型、OAuth URLs等）</li><li>你想要公开的端点的OpenAPI规范</li></ul><p>对于这个插件，我们将在我们的清单中包括以下信息：</p><ul><li>同时方便人类和模型理解的名称和描述</li><li>用户认证，对于这个例子，我们只设置为none</li><li>API配置，其中包括你需要用你的Replit URL更新的OpenAPI URL</li><li>Logo URL和联系信息</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;schema_version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;v1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;name_for_human&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Stock Screener Assistant&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;name_for_model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;stockScreener&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description_for_human&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Plugin for fetching stocks based on various criteria like market capitalization, price, beta, volume, dividend, etc.&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description_for_model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Plugin for fetching stocks based on various criteria like market capitalization, price, beta, volume, dividend, etc. Help users find stocks that meet their requirements.&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;auth&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;none&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;api&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;openapi&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://your-repl-url.repl.co/openapi.yaml&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;is_user_authenticated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;logo_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://your-repl-url.repl.co/logo.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;contact_email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;support@example.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;legal_info_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://www.example.com/legal&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>如上所述，你只需要用你的Repl的实际URL更新your-repl-url。在创建ai-plugin.json文件后，你还需要将它保存在.well-known文件夹中，以便ChatGPT使用它。</p><p>有了我们的插件清单文件，我们需要的最后一件事就是用OpenAPI来文档化我们的API。</p><h1>第三步：用OpenAPI文档化API</h1><p>在这一步，我们需要创建一个OpenAPI规范，正如OpenAI所强调的：</p><p>模型将看到OpenAPI描述字段，这些字段可以用来为不同的字段提供自然语言描述。</p><p>在这种情况下，你需要更新的所有内容就是这里的服务器URL：<a href="https://your-repl-url.username.repl.co">https://your-repl-url.username.repl.co</a>。</p><p>然后，OpenAPI规范定义了/stock_screener端点和用户可以自定义的参数，包括市值、价格、贝塔、股息等。最后，组件部分定义了JSON响应的模式：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line">openapi<span class="punctuation">:</span> <span class="string">&quot;3.0.2&quot;</span></span><br><span class="line">info<span class="punctuation">:</span></span><br><span class="line">  title<span class="punctuation">:</span> <span class="string">&quot;Stock Screener Assistant API&quot;</span></span><br><span class="line">  version<span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span></span><br><span class="line">servers<span class="punctuation">:</span></span><br><span class="line">  - url<span class="punctuation">:</span> <span class="string">&quot;https://stockscreenerplugin.peterfoy2.repl.co&quot;</span></span><br><span class="line">paths<span class="punctuation">:</span></span><br><span class="line">  /stock_screener<span class="punctuation">:</span></span><br><span class="line">    get<span class="punctuation">:</span></span><br><span class="line">      operationId<span class="punctuation">:</span> fetchStockScreener</span><br><span class="line">      summary<span class="punctuation">:</span> <span class="string">&quot;Fetch Stock Screener&quot;</span></span><br><span class="line">      parameters<span class="punctuation">:</span></span><br><span class="line">        - in<span class="punctuation">:</span> query</span><br><span class="line">          name<span class="punctuation">:</span> marketCapMoreThan</span><br><span class="line">          schema<span class="punctuation">:</span></span><br><span class="line">            type<span class="punctuation">:</span> number</span><br><span class="line">          required<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">          description<span class="punctuation">:</span> <span class="string">&quot;Market capitalization greater than the specified value.&quot;</span></span><br><span class="line">        - in<span class="punctuation">:</span> query</span><br><span class="line">          name<span class="punctuation">:</span> marketCapLowerThan</span><br><span class="line">          schema<span class="punctuation">:</span></span><br><span class="line">            type<span class="punctuation">:</span> number</span><br><span class="line">          required<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">          description<span class="punctuation">:</span> <span class="string">&quot;Market capitalization lower than the specified value.&quot;</span></span><br><span class="line">        - in<span class="punctuation">:</span> query</span><br><span class="line">          name<span class="punctuation">:</span> priceMoreThan</span><br><span class="line">          schema<span class="punctuation">:</span></span><br><span class="line">            type<span class="punctuation">:</span> number</span><br><span class="line">          required<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">          description<span class="punctuation">:</span> <span class="string">&quot;Price greater than the specified value.&quot;</span></span><br><span class="line">        - in<span class="punctuation">:</span> query</span><br><span class="line">          name<span class="punctuation">:</span> priceLowerThan</span><br><span class="line">          schema<span class="punctuation">:</span></span><br><span class="line">            type<span class="punctuation">:</span> number</span><br><span class="line">          required<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">          description<span class="punctuation">:</span> <span class="string">&quot;Price lower than the specified value.&quot;</span></span><br><span class="line">        - in<span class="punctuation">:</span> query</span><br><span class="line">          name<span class="punctuation">:</span> betaMoreThan</span><br><span class="line">          schema<span class="punctuation">:</span></span><br><span class="line">            type<span class="punctuation">:</span> number</span><br><span class="line">          required<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">          description<span class="punctuation">:</span> <span class="string">&quot;Beta greater than the specified value.&quot;</span></span><br><span class="line">        - in<span class="punctuation">:</span> query</span><br><span class="line">          name<span class="punctuation">:</span> betaLowerThan</span><br><span class="line">          schema<span class="punctuation">:</span></span><br><span class="line">            type<span class="punctuation">:</span> number</span><br><span class="line">          required<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">          description<span class="punctuation">:</span> <span class="string">&quot;Beta lower than the specified value.&quot;</span></span><br><span class="line">        - in<span class="punctuation">:</span> query</span><br><span class="line">          name<span class="punctuation">:</span> volumeMoreThan</span><br><span class="line">          schema<span class="punctuation">:</span></span><br><span class="line">            type<span class="punctuation">:</span> number</span><br><span class="line">          required<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">          description<span class="punctuation">:</span> <span class="string">&quot;Volume greater than the specified value.&quot;</span></span><br><span class="line">        - in<span class="punctuation">:</span> query</span><br><span class="line">          name<span class="punctuation">:</span> volumeLowerThan</span><br><span class="line">          schema<span class="punctuation">:</span></span><br><span class="line">            type<span class="punctuation">:</span> number</span><br><span class="line">          required<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">          description<span class="punctuation">:</span> <span class="string">&quot;Volume lower than the specified value.&quot;</span></span><br><span class="line">        - in<span class="punctuation">:</span> query</span><br><span class="line">          name<span class="punctuation">:</span> dividendMoreThan</span><br><span class="line">          schema<span class="punctuation">:</span></span><br><span class="line">            type<span class="punctuation">:</span> number</span><br><span class="line">          required<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">          description<span class="punctuation">:</span> <span class="string">&quot;Dividend greater than the specified value.&quot;</span></span><br><span class="line">        - in<span class="punctuation">:</span> query</span><br><span class="line">          name<span class="punctuation">:</span> dividendLowerThan</span><br><span class="line">          schema<span class="punctuation">:</span></span><br><span class="line">            type<span class="punctuation">:</span> number</span><br><span class="line">          required<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">          description<span class="punctuation">:</span> <span class="string">&quot;Dividend lower than the specified value.&quot;</span></span><br><span class="line">        - in<span class="punctuation">:</span> query</span><br><span class="line">          name<span class="punctuation">:</span> isEtf</span><br><span class="line">          schema<span class="punctuation">:</span></span><br><span class="line">            type<span class="punctuation">:</span> boolean</span><br><span class="line">          required<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">          description<span class="punctuation">:</span> <span class="string">&quot;Is ETF (true/false).&quot;</span></span><br><span class="line">        - in<span class="punctuation">:</span> query</span><br><span class="line">          name<span class="punctuation">:</span> isActivelyTrading</span><br><span class="line">          schema<span class="punctuation">:</span></span><br><span class="line">            type<span class="punctuation">:</span> boolean</span><br><span class="line">          required<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">          description<span class="punctuation">:</span> <span class="string">&quot;Is actively trading (true/false).&quot;</span></span><br><span class="line">        - in<span class="punctuation">:</span> query</span><br><span class="line">          name<span class="punctuation">:</span> sector</span><br><span class="line">          schema<span class="punctuation">:</span></span><br><span class="line">            type<span class="punctuation">:</span> string</span><br><span class="line">          required<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">          description<span class="punctuation">:</span> <span class="string">&quot;Sector (e.g., Technology, Healthcare, etc.).&quot;</span></span><br><span class="line">        - in<span class="punctuation">:</span> query</span><br><span class="line">          name<span class="punctuation">:</span> industry</span><br><span class="line">          schema<span class="punctuation">:</span></span><br><span class="line">            type<span class="punctuation">:</span> string</span><br><span class="line">          required<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">          description<span class="punctuation">:</span> <span class="string">&quot;Industry (e.g., Software, Banks, etc.).&quot;</span></span><br><span class="line">        - in<span class="punctuation">:</span> query</span><br><span class="line">          name<span class="punctuation">:</span> country</span><br><span class="line">          schema<span class="punctuation">:</span></span><br><span class="line">            type<span class="punctuation">:</span> string</span><br><span class="line">          required<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">          description<span class="punctuation">:</span> <span class="string">&quot;Country (e.g., US, UK, CA, etc.).&quot;</span></span><br><span class="line">        - in<span class="punctuation">:</span> query</span><br><span class="line">          name<span class="punctuation">:</span> exchange</span><br><span class="line">          schema<span class="punctuation">:</span></span><br><span class="line">            type<span class="punctuation">:</span> string</span><br><span class="line">          required<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">          description<span class="punctuation">:</span> <span class="string">&quot;Exchange (e.g., NYSE, NASDAQ, etc.).&quot;</span></span><br><span class="line">        - in<span class="punctuation">:</span> query</span><br><span class="line">          name<span class="punctuation">:</span> limit</span><br><span class="line">          schema<span class="punctuation">:</span></span><br><span class="line">            type<span class="punctuation">:</span> integer</span><br><span class="line">          required<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">          description<span class="punctuation">:</span> <span class="string">&quot;Limit the number of results.&quot;</span></span><br><span class="line">      responses<span class="punctuation">:</span></span><br><span class="line">        <span class="attr">&quot;200&quot;</span><span class="punctuation">:</span></span><br><span class="line">          description<span class="punctuation">:</span> <span class="string">&quot;A list of stocks matching the given criteria.&quot;</span></span><br><span class="line">          content<span class="punctuation">:</span></span><br><span class="line">            application/json<span class="punctuation">:</span></span><br><span class="line">              schema<span class="punctuation">:</span></span><br><span class="line">                type<span class="punctuation">:</span> array</span><br><span class="line">                items<span class="punctuation">:</span></span><br><span class="line">                  type<span class="punctuation">:</span> object</span><br><span class="line">                  properties<span class="punctuation">:</span></span><br><span class="line">                    symbol<span class="punctuation">:</span></span><br><span class="line">                      type<span class="punctuation">:</span> string</span><br><span class="line">                    companyName<span class="punctuation">:</span></span><br><span class="line">                      type<span class="punctuation">:</span> string</span><br><span class="line">                    marketCap<span class="punctuation">:</span></span><br><span class="line">                      type<span class="punctuation">:</span> number</span><br><span class="line">                    sector<span class="punctuation">:</span></span><br><span class="line">                      type<span class="punctuation">:</span> string</span><br><span class="line">                    beta<span class="punctuation">:</span></span><br><span class="line">                      type<span class="punctuation">:</span> number</span><br><span class="line">                    price<span class="punctuation">:</span></span><br><span class="line">                      type<span class="punctuation">:</span> number</span><br><span class="line">                    lastAnnualDividend<span class="punctuation">:</span></span><br><span class="line">                      type<span class="punctuation">:</span> number</span><br><span class="line">                    volume<span class="punctuation">:</span></span><br><span class="line">                      type<span class="punctuation">:</span> number</span><br><span class="line">                    exchange<span class="punctuation">:</span></span><br><span class="line">                      type<span class="punctuation">:</span> string</span><br><span class="line">                    exchangeShortName<span class="punctuation">:</span></span><br><span class="line">                      type<span class="punctuation">:</span> string</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1>第四步：部署和测试ChatGPT插件</h1><p>有了这三个文件，我们现在可以去部署和测试新的ChatGPT插件。我们需要做的是：</p><ul><li>在你向Replit添加了所有必要的文件后，点击&quot;Run&quot;来启动服务器并使插件可用</li><li>前往ChatGPT并导航到插件商店</li><li>选择&quot;Develop your own plugin&quot;并输入你的Replit URL<br><img src="https://yiboway-blog-1301945320.cos.ap-hongkong.myqcloud.com/img/blog_article/Screenshot-2023-04-28-at-11.50.25-AM.png" alt></li></ul><p>在安装和启用新插件后，你可以测试它并指定你的股票搜索条件，我也可以确认在我写这篇文章的时候苹果的市值是正确的：<br><img src="https://yiboway-blog-1301945320.cos.ap-hongkong.myqcloud.com/img/blog_article/Screenshot-2023-04-28-at-11.56.02-AM.png" alt></p><h1>总结：ChatGPT股票筛选器插件</h1><p>在这篇指南中，我们看到了如何使用Financial Modeling Prep API构建一个简单的股票筛选ChatGPT插件。回顾一下，我们：</p><ul><li>在main.py文件中创建了一个Flask应用，创建必要的路由接口</li><li>在ai-plugin.json清单文件中定义了我们插件的元数据</li><li>使用OpenAPI文档化了API，概述了/stock_screener接口、参数和响应模式</li><li>在Replit上托管了项目，并在插件商店中进行了测试</li></ul><p>还有一些步骤我们想要包括在将这样的插件投入生产中，比如限制速率和用户认证，我们将在未来的教程中讨论这些。</p>]]></content>
      
      
      <categories>
          
          <category> ChatGPT </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ChatGPT </tag>
            
            <tag> stock </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>firstpage</title>
      <link href="/2022/12/03/firstpage/"/>
      <url>/2022/12/03/firstpage/</url>
      
        <content type="html"><![CDATA[<h1>这是我的第一篇文章</h1><h2 id="这是二级标题">这是二级标题</h2><p>这是正文测试。</p><p>换了一行？</p><ol><li>列表1</li><li>列表2</li></ol><p>新列表</p><ol><li>新列表1</li><li>新列表2</li></ol><p><img src="https://yiboway-blog-1301945320.cos.ap-hongkong.myqcloud.com/img/blog_article/20221026132546.jpg" alt><br><em>插入图片</em></p><h3 id="这是三级标题-数学公式">这是三级标题 数学公式</h3><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munder><mrow><mi>lim</mi><mo>⁡</mo></mrow><mrow><mi>x</mi><mo>→</mo><mi mathvariant="normal">∞</mi></mrow></munder><mfrac><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><mi>x</mi></mfrac><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\lim_{x \to \infin}\frac{sin(t)}{x}=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.127em;vertical-align:-0.7em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-2.4em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mrel mtight">→</span><span class="mord mtight">∞</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">lim</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">x</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="mord mathnormal">in</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span></p><p>就是在一段文字中插入<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>lim</mi><mo>⁡</mo></mrow><mrow><mi>x</mi><mo>→</mo><mi mathvariant="normal">∞</mi></mrow></msub><mfrac><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><mi>x</mi></mfrac><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\lim_{x \to \infin}\frac{sin(t)}{x}=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em;"></span><span class="mop"><span class="mop">lim</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mrel mtight">→</span><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">in</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">t</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>公式</p><h3 id="链接">链接</h3><p>这是一个<a href="https://www.antmoe.com/posts/6081157f/">链接</a></p><h3 id="code-代码块">code 代码块</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> m = []</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> test1 </tag>
            
            <tag> test2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2022/11/28/hello-world/"/>
      <url>/2022/11/28/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start">Quick Start</h2><h3 id="Create-a-new-post">Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server">Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files">Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites">Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
